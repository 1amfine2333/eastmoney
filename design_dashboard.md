# ğŸ“Š Market Intelligence Dashboard è®¾è®¡æ–‡æ¡£

## 1. è®¾è®¡ç›®æ ‡
æ„å»ºä¸€ä¸ªå®æ—¶/å‡†å®æ—¶çš„å…¨æ™¯é©¾é©¶èˆ±ï¼Œæ•´åˆ**å®è§‚å¸‚åœºæ•°æ®**ã€**è¡Œä¸šæ¿å—è¡¨ç°**ã€**èµ„é‡‘æµå‘**ä»¥åŠ**æœ¬ç³»ç»Ÿå†…éƒ¨çš„ç ”æŠ¥ç”ŸæˆçŠ¶æ€**ã€‚ç›®æ ‡æ˜¯è®©ç”¨æˆ·åœ¨30ç§’å†…æŒæ¡ä»Šæ—¥å¸‚åœºæƒ…ç»ªä¸ç³»ç»Ÿè¿è¡Œæƒ…å†µã€‚

## 2. é¡µé¢å¸ƒå±€è§„åˆ’ (Grid Layout)
é¡µé¢é‡‡ç”¨ **3è¡Œ x 2-3åˆ—** çš„å“åº”å¼æ …æ ¼å¸ƒå±€ (Grid System)ã€‚

### **Row 1: å®è§‚ä¸æƒ…ç»ª (Market Pulse)**
*   **æ¿å— 1: Aè‚¡å…¨æ™¯æ¦‚è§ˆ (Market Breadth & Liquidity)**
    *   **å±•ç¤ºå†…å®¹:**
        *   **æ¶¨è·Œåˆ†å¸ƒ:** ä¸Šæ¶¨/ä¸‹è·Œå®¶æ•°ï¼ˆè¿›åº¦æ¡æˆ–ä»ªè¡¨ç›˜ï¼‰ï¼Œæ¶¨åœ/è·Œåœå®¶æ•°ã€‚
        *   **èµ„é‡‘å…¨è²Œ:** ä¸»åŠ›èµ„é‡‘å‡€æµå…¥/æµå‡ºæ€»é¢ï¼ˆçº¢/ç»¿ç®­å¤´ï¼‰ã€‚
        *   **å¸‚åœºçƒ­åº¦:** ä»Šæ—¥ä¸¤å¸‚æ€»æˆäº¤é¢ï¼ˆäº¿å…ƒï¼‰ï¼Œè¾ƒæ˜¨æ—¥å˜åŒ–é¢åŠç™¾åˆ†æ¯”ï¼ˆç¯æ¯”ï¼‰ã€‚
    *   **æ•°æ®æº:** AkShare (`stock_zh_a_spot_em` ç»Ÿè®¡æˆ–å¤§ç›˜æŒ‡æ•°æ¥å£).

*   **æ¿å— 2: é»„é‡‘/å®è§‚é”šç‚¹ (Gold & Macro)**
    *   **å±•ç¤ºå†…å®¹:**
        *   ç°è´§é»„é‡‘ (XAU/USD) å®æ—¶ä»·æ ¼ã€æ—¥å†…æ¶¨è·Œå¹…ã€‚
        *   ç¾å…ƒæŒ‡æ•° (DXY) æˆ– ç¾å€ºæ”¶ç›Šç‡ (10Y)ã€‚
        *   Mini Kçº¿å›¾ (Sparkline)ã€‚
    *   **æ•°æ®æº:** YFinance (å¤ç”¨ç°æœ‰ `GoldSilverAnalyst` é€»è¾‘).

### **Row 2: è¡Œä¸šä¸å¼‚åŠ¨ (Sector & Action)**
*   **æ¿å— 3: é¢†æ¶¨/é¢†è·Œæ¿å— (Sector Performance)**
    *   **å±•ç¤ºå†…å®¹:**
        *   Top 5 é¢†æ¶¨è¡Œä¸šï¼ˆåç§° + æ¶¨å¹… + ä¸»åŠ›å‡€æµå…¥ï¼‰ã€‚
        *   Top 5 é¢†è·Œè¡Œä¸šã€‚
        *   **å¯è§†åŒ–:** æ°´å¹³æŸ±çŠ¶å›¾ (Bar Chart)ï¼Œé¢œè‰²åŒºåˆ†æ¶¨è·Œã€‚
    *   **æ•°æ®æº:** AkShare (`stock_board_industry_name_em` + `stock_sector_fund_flow_rank`).

*   **æ¿å— 4: æ¿å—å¼‚åŠ¨ç›‘æ§ (Sector Abnormalities)**
    *   **å±•ç¤ºå†…å®¹:**
        *   å®æ—¶æ»šåŠ¨çš„æ¿å—å¼‚åŠ¨åˆ—è¡¨ï¼ˆå¦‚ï¼š09:35 åŠå¯¼ä½“æ¿å—æ‹‰å‡, 14:00 è¯åˆ¸æ¿å—è·³æ°´ï¼‰ã€‚
        *   å¦‚æœæ²¡æœ‰å®æ—¶å¼‚åŠ¨æ¥å£ï¼Œæ›¿ä»£ä¸º **ä¸»åŠ›èµ„é‡‘å¼ºå¼±æ¦œ**ã€‚
    *   **æ•°æ®æº:** AkShare (`stock_board_change_em` æ¿å—å¼‚åŠ¨).

### **Row 3: èµ„é‡‘ä¸ç³»ç»Ÿ (Money & System)**
*   **æ¿å— 5: åŠ å‡ä»“/èµ„é‡‘æ¦œå• (Top Flows)**
    *   **å±•ç¤ºå†…å®¹:**
        *   **åŒ—å‘èµ„é‡‘/ä¸»åŠ›èµ„é‡‘** å‡€ä¹°å…¥ Top 10 ä¸ªè‚¡ã€‚
        *   å±•ç¤ºï¼šä»£ç  | åç§° | å‡€ä¹°é¢ | æ¶¨è·Œå¹…ã€‚
    *   **æ•°æ®æº:** AkShare (`stock_hsgt_stock_statistics_em` æˆ– `stock_individual_fund_flow_rank`).

*   **æ¿å— 6: ç³»ç»Ÿäº§å‡ºç»Ÿè®¡ (System Analytics)**
    *   **å±•ç¤ºå†…å®¹:**
        *   ä»Šæ—¥å·²ç”ŸæˆæŠ¥è¡¨æ•°é‡ (Total Reports).
        *   åˆ†ç±»ç»Ÿè®¡: ç›˜å‰ (Pre) / ç›˜å (Post) / å•†å“ (Cmdty).
        *   æœ€æ–°ç”Ÿæˆçš„æŠ¥è¡¨å¿«æ·å…¥å£ã€‚
    *   **æ•°æ®æº:** æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (`reports/` ç›®å½•æ‰«æ).

---

## 3. API æ¥å£è®¾è®¡

### Endpoint: `GET /api/dashboard/overview`
èšåˆæ‰€æœ‰æ•°æ®ï¼Œå°½é‡å‡å°‘å‰ç«¯è¯·æ±‚æ¬¡æ•°ã€‚åç«¯éœ€å®ç°ç¼“å­˜æœºåˆ¶ (TTL: 1-5 mins)ã€‚

**Response Structure:**
```json
{
  "market_overview": {
    "indices": [
      {"name": "ä¸Šè¯æŒ‡æ•°", "price": 3200.50, "change": 0.52},
      {"name": "åˆ›ä¸šæ¿æŒ‡", "price": 1700.20, "change": -0.3}
    ],
    "breadth": {
      "up": 3000, "down": 1800, "flat": 200,
      "limit_up": 45, "limit_down": 2
    },
    "turnover": {
      "total": 8500.5, // äº¿å…ƒ
      "change_amount": 500.2,
      "change_pct": 6.25
    },
    "main_fund_flow": -120.5 // äº¿å…ƒ
  },
  "gold_macro": {
    "symbol": "GC=F",
    "price": 2650.50,
    "change_pct": 0.45,
    "last_updated": "14:30:00"
  },
  "sectors": {
    "top_gainers": [
      {"name": "åŠå¯¼ä½“", "change_pct": 3.2, "flow": 15.2}, ...
    ],
    "top_losers": [...]
  },
  "abnormal_movements": [
    {"time": "10:00", "name": "ç™½é…’", "type": "æ‹‰å‡"}
  ],
  "top_holdings_changes": [ // åŒ—å‘/ä¸»åŠ›å‡€ä¹°å…¥
    {"code": "600519", "name": "è´µå·èŒ…å°", "net_buy": 5.2, "change_pct": 1.2}, ...
  ],
  "system_stats": {
    "today_total": 5,
    "breakdown": {"pre": 2, "post": 1, "commodity": 2},
    "latest_report": "2026-01-10_commodities_gold.md"
  }
}
```

## 4. å‰ç«¯ç»„ä»¶è®¾è®¡ (React + MUI)

*   **Layout:** ä½¿ç”¨ CSS Grid æˆ– MUI `<Grid container>`.
*   **Card Component:** ç»Ÿä¸€çš„å¡ç‰‡é£æ ¼ï¼Œå¸¦æ ‡é¢˜æ å’Œå³ä¸Šè§’åˆ·æ–°æŒ‰é’®ã€‚
*   **Charts:** ä½¿ç”¨ `recharts` æˆ–ç®€å• CSS ç»˜åˆ¶è¿›åº¦æ¡å’ŒæŸ±çŠ¶å›¾ã€‚
*   **Auto-Refresh:** é¡µé¢æ¯ 60ç§’ è‡ªåŠ¨è½®è¯¢ä¸€æ¬¡ APIã€‚

## 5. å¼€å‘è®¡åˆ’

1.  **åç«¯ (`src/analysis/dashboard.py`):**
    *   åˆ›å»º `DashboardService` ç±»ã€‚
    *   å®ç°å„æ•°æ®æºçš„è·å–æ–¹æ³• (AkShare, YFinance, FileSystem)ã€‚
    *   å®ç°æ•°æ®ç¼“å­˜ (Simple memory cache)ã€‚
2.  **API (`api_server.py`):**
    *   æ³¨å†Œ `/api/dashboard/overview` è·¯ç”±ã€‚
3.  **å‰ç«¯ (`web/src/pages/Dashboard.tsx`):**
    *   å®ç° Dashboard å¸ƒå±€ã€‚
    *   å¼€å‘å„ä¸ªå­æ¿å—ç»„ä»¶ã€‚
    *   æ¥å…¥ APIã€‚
